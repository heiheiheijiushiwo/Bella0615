<!DOCTYPE html>
<html lang="zh">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>å®‡å®™å°½å¤´æ˜¯å¤¸å¤¸æœº</title>
<style>
body {
  font-family: "Comic Sans MS","Microsoft Yahei",sans-serif;
  margin:0;padding:0;overflow-x:hidden;
  background: linear-gradient(270deg,#ff9a9e,#fad0c4,#fbc2eb,#a6c1ee);
  background-size:800% 800%;
  animation: gradientBG 15s ease infinite;
  min-height:100vh;
}
@keyframes gradientBG {0%{background-position:0% 50%}50%{background-position:100% 50%}100%{background-position:0% 50%}}
.container {max-width:500px;margin:0 auto;padding:20px;text-align:center;position:relative;z-index:2;}
.card {background:rgba(255,255,255,0.9);border-radius:20px;padding:24px;margin-top:20px;box-shadow:0 8px 20px rgba(0,0,0,0.15);}
h1 {font-size:22px;margin-bottom:10px;color:#333;}
.intro {font-size:16px;color:#555;margin-bottom:10px;line-height:1.5;}
.options {display:flex;flex-direction:column;gap:14px;margin-top:20px;}
button.option, .copy-btn, .reward-btn, .retry-btn {
  padding:14px;border:none;border-radius:12px;font-size:16px;cursor:pointer;transition:all .25s;position:relative;overflow:hidden;width:80%;max-width:300px;margin:10px auto;
}
button.option {background:#fff5f0;}
button.option:hover {background:#ffd6ba;transform: scale(1.05) rotate(-1deg);}
.copy-btn, .reward-btn, .retry-btn {background:linear-gradient(45deg,#ff9a8b,#ff6a88,#ff99ac);color:#fff;box-shadow:0 4px 12px rgba(0,0,0,0.2);}
.copy-btn:hover, .reward-btn:hover, .retry-btn:hover {transform: scale(1.08);}
.reward-btn {animation: pulse 1s infinite;}
#result {font-size:18px;line-height:1.8;margin:20px 0;color:#222;text-align:left;white-space:pre-wrap;word-break:break-word;}
.hidden {display:none;}
@keyframes pulse {0%{transform:scale(1);}50%{transform:scale(1.15);}100%{transform:scale(1);}}
#musicBtn {position:fixed;top:15px;right:15px;width:50px;height:50px;border-radius:50%;border:none;background:linear-gradient(45deg,#ff9a8b,#ff6a88,#ff99ac);color:#fff;font-size:24px;cursor:pointer;z-index:999;box-shadow:0 4px 12px rgba(0,0,0,0.3);}
.milk-tea-img {width:150px;margin-top:10px;}
</style>
</head>
<body>

<audio id="bgMusic" loop>
  <source src="background.mp3" type="audio/mpeg">
</audio>
<button id="musicBtn">â–¶ï¸</button>

<div class="container">
  <div id="quiz" class="card">
    <div class="intro">æ¬¢è¿æ¥åˆ°å®‡å®™å°½å¤´çš„å¤¸å¤¸æœºï¼å›ç­”å‡ ä¸ªå°é—®é¢˜ï¼Œçœ‹çœ‹ä»Šå¤©çš„ä½ æœ‰å¤šé—ªäº®âœ¨</div>
    <h1 id="question">é¢˜ç›®åŠ è½½ä¸­...</h1>
    <div class="options" id="options"></div>
  </div>

  <div id="resultCard" class="card hidden">
    <h1>âœ¨ ä½ çš„å®‡å®™çº§åºŸè¯æ–‡å­¦ âœ¨</h1>
    <div id="result"></div>
    <button class="copy-btn" onclick="copyResult()">å¤åˆ¶ç»™æœ‹å‹</button>
    <button class="copy-btn" onclick="generateImage()">ç”Ÿæˆç­¾åå›¾</button>
    <button class="reward-btn" onclick="showRewardCard()">é¢†å–ä»Šæ—¥åŠ ç³–ğŸ¹</button>
    <button class="retry-btn" onclick="retryQuiz()">å†ç­”ä¸€æ¬¡</button>
    <canvas id="shareCanvas" width="400" height="500" class="hidden"></canvas>
  </div>

  <div id="rewardCard" class="card hidden">
    <h1>ğŸµ æ²¡æœ‰ä¸‹åˆèŒ¶çš„ä¸€å¤©ï¼Œä¹Ÿè¦çŠ’åŠ³è‡ªå·±ï¼</h1>
    <p>ç‚¹å‡»ä¸‹é¢æŒ‰é’®ï¼Œæ¥æ”¶ä½ çš„ä»Šæ—¥åŠ ç³–å¥–åŠ±å§~</p>
    <button class="reward-btn" onclick="showMilkTea()">æ¥æ”¶ä»Šæ—¥åŠ ç³–</button>
    <button class="retry-btn" onclick="retryQuiz()">å†ç­”ä¸€æ¬¡</button>
    <div id="milkTeaContainer" style="margin-top:20px;"></div>
  </div>
</div>

<script>
document.addEventListener("DOMContentLoaded", function(){
const QUESTIONS=[
  {q:"å¦‚æœä½ æ˜¯ä¸€ç§åŠ¨ç‰©ï¼Œä½ ä¼šæ˜¯ï¼Ÿ",options:[{text:"å’¸é±¼",phrase:"åƒå’¸é±¼ä¸€æ ·ç˜«ç€ä¹Ÿé—ªé—ªå‘å…‰"},{text:"é¸µé¸Ÿ",phrase:"æŠŠå¤´åŸ‹è¿›æ²™å­ä¹Ÿè¶…å¯çˆ±"},{text:"ä»“é¼ ",phrase:"é¼“ç€è…®å¸®å­ä¾ç„¶åŠªåŠ›å­˜ç²®"}]},
  {q:"ä½ æœ€æ“…é•¿çš„è¶…èƒ½åŠ›æ˜¯ï¼Ÿ",options:[{text:"ä¸€è§‰ç¡åˆ°ä¸­åˆ",phrase:"èƒ½æŠŠåºŠå½“æˆå……ç”µå®"},{text:"ç§’å›å¤–å–å°å“¥",phrase:"æ•ˆç‡å ªæ¯”5G"},{text:"å‡è£…å¾ˆå¿™",phrase:"æ¼”æŠ€å°ç¥çº§åˆ«"}]},
  {q:"å¦‚æœç”Ÿæ´»æ˜¯ä¸€æ¡£ç»¼è‰ºï¼Œä½ ä¼šæ˜¯ï¼Ÿ",options:[{text:"åæ§½æ‹…å½“",phrase:"å˜´ç‚®è¾“å‡º666"},{text:"èƒŒæ™¯æ¿",phrase:"ä½è°ƒåˆ°é—ªé—ªå‘å…‰"},{text:"ä¹±å…¥å˜‰å®¾",phrase:"éšæ—¶æ•´æ´»çš„é«˜æ‰‹"}]},
  {q:"å½“å€’éœ‰æ¥ä¸´æ—¶ï¼Œä½ ä¼šï¼Ÿ",options:[{text:"å‡è£…è‡ªå·±æ˜¯NPC",phrase:"è¢«æ‰“ä¹Ÿèƒ½ç»§ç»­è¥ä¸š"},{text:"æ‹¿å‡ºå°æœ¬æœ¬è®°ä»‡",phrase:"å¿ƒçœ¼æ¯”é’ˆè¿˜ç»†ä½†è¶…çœŸå®"},{text:"è£…å‚»å–èŒ",phrase:"å¯çˆ±åˆ°è®©å€’éœ‰è‡ªé—­"}]},
  {q:"ä½ çš„éšè—èº«ä»½å…¶å®æ˜¯ï¼Ÿ",options:[{text:"è¡¨æƒ…åŒ…ä¾›åº”å•†",phrase:"è‡ªå¸¦100Gè¡¨æƒ…å­˜è´§"},{text:"æœ‹å‹åœˆç‚¹èµæœºå™¨",phrase:"ä¸“æ²»å†·æ¸…æ°”æ°›"},{text:"æ‘¸é±¼å¤©æ‰",phrase:"æ‘¸é±¼ä¹Ÿèƒ½å¼€åˆ›äº‹ä¸š"}]}
];
let current=0;
let selectedPhrases=[];
let musicStarted=false;
const bgMusic=document.getElementById('bgMusic');
const musicBtn=document.getElementById('musicBtn');

function showQuestion(){
  const qObj=QUESTIONS[current];
  document.getElementById('question').innerText=qObj.q;
  const optsDiv=document.getElementById('options');
  optsDiv.innerHTML='';
  qObj.options.forEach((op)=>{
    const btn=document.createElement('button');
    btn.className='option';
    btn.innerText=op.text;
    btn.onclick=()=>selectOption(op.phrase);
    optsDiv.appendChild(btn);
  });
}

function selectOption(phrase){
  if(!musicStarted){bgMusic.play().catch(()=>{});musicStarted=true;musicBtn.innerText='ğŸ”Š';}
  selectedPhrases.push(phrase);
  current++;
  if(current<QUESTIONS.length){showQuestion();}else{showResult();}
}

function showResult(){
  document.getElementById('quiz').classList.add('hidden');
  const resultText=`ä½ ${selectedPhrases[0]}ï¼›è¿˜${selectedPhrases[1]}ï¼›ç®€ç›´${selectedPhrases[2]}ã€‚\nå³ä¾¿${selectedPhrases[3]}ï¼Œä¾ç„¶${selectedPhrases[4]}ï¼\n\næ‰€ä»¥è¯·è‡ªè±ªä¸€ç‚¹ï¼Œä½ å°±æ˜¯å®‡å®™é™å®šæ¬¾ï¼`;
  document.getElementById('result').innerText=resultText;
  document.getElementById('resultCard').classList.remove('hidden');
}

function retryQuiz(){
  current=0;
  selectedPhrases=[];
  document.getElementById('resultCard').classList.add('hidden');
  document.getElementById('rewardCard').classList.add('hidden');
  document.getElementById('quiz').classList.remove('hidden');
  window.scrollTo({top:0,behavior:'smooth'});
  musicStarted=false;
  showQuestion();
}

musicBtn.onclick=function(){
  if(bgMusic.paused){
    bgMusic.play().catch(()=>{});
    musicBtn.innerText='ğŸ”Š';musicStarted=true;
  }else{
    bgMusic.pause();musicBtn.innerText='ğŸ”‡';
  }
};

function copyResult(){
  navigator.clipboard.writeText(document.getElementById('result').innerText)
  .then(()=>{alert('å·²å¤åˆ¶åˆ°å‰ªè´´æ¿');});
}

function generateImage(){
  const canvas=document.getElementById('shareCanvas');
  canvas.classList.remove('hidden');
  const ctx=canvas.getContext('2d');
  ctx.fillStyle='#fff8f0';
  ctx.fillRect(0,0,canvas.width,canvas.height);
  ctx.fillStyle='#333';
  ctx.font='26px Microsoft Yahei';
  ctx.fillText('Bella ä»Šæ—¥ä¸Šä¸Šç­¾',50,40);
  const text=document.getElementById('result').innerText;
  wrapText(ctx,text,20,80,360,26);
  const link=document.createElement('a');
  link.download='Bellaç­¾.png';
  link.href=canvas.toDataURL();
  link.click();
}

function wrapText(ctx,text,x,y,maxWidth,lineHeight){
  const words=text.split('');
  let line='';
  for(let n=0;n<words.length;n++){
    const testLine=line+words[n];
    const testWidth=ctx.measureText(testLine).width;
    if(testWidth>maxWidth && n>0){
      ctx.fillText(line,x,y);
      line=words[n];
      y+=lineHeight;
    }else{
      line=testLine;
    }
  }
  ctx.fillText(line,x,y);
}

function showRewardCard(){
  document.getElementById('resultCard').classList.add('hidden');
  document.getElementById('rewardCard').classList.remove('hidden');
  window.scrollTo({top:0,behavior:'smooth'});
}

function showMilkTea(){
  document.getElementById('milkTeaContainer').innerHTML='<img src="milktea.png" class="milk-tea-img">';
}

// æŒ‚è½½åˆ°å…¨å±€ï¼Œä¿è¯æŒ‰é’®å¯ç”¨
window.retryQuiz = retryQuiz;
window.copyResult = copyResult;
window.generateImage = generateImage;
window.showRewardCard = showRewardCard;
window.showMilkTea = showMilkTea;

// åˆå§‹åŒ–
showQuestion();
});
</script>

</body>
</html>
